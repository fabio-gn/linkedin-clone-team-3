<div id="post-section" class="container border rounded mt-3 p-3">
  <div class="d-flex">
    <div>
      <div>
        <img
          class="border rounded-circle me-2"
          [src]="post.user.image"
          alt=""
        />
      </div>
      <div>
        <h5 class="card-name">
          <a routerLink="/profile"
            >{{ post.user.name }} {{ post.user.surname }}</a
          >
        </h5>
        <p class="card-title">{{ post.user.title }}</p>
      </div>
    </div>
    <!-- ------ -->
    <div>
      <div *ngIf="post.user._id === currentUserId" class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="dropdownMenuButton1"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          <i class="bi bi-pencil"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
          <li>
            <button (click)="editPost(post._id)" class="dropdown-item">
              Edit
            </button>
          </li>
          <li>
            <button (click)="deletePost(post._id)" class="dropdown-item">
              Delete
            </button>
          </li>
        </ul>
      </div>
    </div>
    <!-- ------------ -->
  </div>
  <div class="post-text">
    <p>
      {{ post.text }}
    </p>
    <div *ngIf="post.user._id === currentUserId" class="dropdown">
      <button
        class="btn btn-secondary dropdown-toggle"
        type="button"
        id="dropdownMenuButton1"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        <i class="bi bi-pencil"></i>
      </button>
      <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
        <li>
          <button (click)="editPost(post._id)" class="dropdown-item">
            Edit
          </button>
        </li>
        <li>
          <button (click)="deletePost(post._id)" class="dropdown-item">
            Delete
          </button>
        </li>
      </ul>
    </div>

    <!-- Utilizza la direttiva *ngIf per mostrare il campo di input e il pulsante "Save" solo quando la variabile isEditing Ã¨ impostata su true -->
    <div *ngIf="isEditing">
      <!-- Add an input field for editing the post's text -->
      <input [(ngModel)]="editedText" />

      <!-- Add a save button for the post -->
      <button (click)="savePost(post._id, editedText)">Save</button>
    </div>
  </div>

  <div>
    <button type="button" class="btn">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        fill="currentColor"
        class="bi bi-hand-thumbs-up"
        viewBox="0 0 16 16"
      >
        <path
          d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z"
        />
      </svg>
      Consiglia
    </button>
    <button type="button" class="btn" (click)="commentToggle()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        fill="currentColor"
        class="bi bi-chat-right-text"
        viewBox="0 0 16 16"
      >
        <path
          d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"
        />
        <path
          d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"
        />
      </svg>
      Comento
    </button>
    <button type="button" class="btn">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        fill="currentColor"
        class="bi bi-repeat"
        viewBox="0 0 16 16"
      >
        <path
          d="M11 5.466V4H5a4 4 0 0 0-3.584 5.777.5.5 0 1 1-.896.446A5 5 0 0 1 5 3h6V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192Zm3.81.086a.5.5 0 0 1 .67.225A5 5 0 0 1 11 13H5v1.466a.25.25 0 0 1-.41.192l-2.36-1.966a.25.25 0 0 1 0-.384l2.36-1.966a.25.25 0 0 1 .41.192V12h6a4 4 0 0 0 3.585-5.777.5.5 0 0 1 .225-.67Z"
        />
      </svg>
      Diffondi il post
    </button>
    <button type="button" class="btn">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        fill="currentColor"
        class="bi bi-send-fill"
        viewBox="0 0 16 16"
      >
        <path
          d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"
        />
      </svg>
      Invia
    </button>
  </div>
  <div
    *ngIf="isComment"
    class="sezione-aggiungi-commento d-flex align-items-center gap-2 my-2"
  >
    <div
      class="profile-image border rounded-circle"
      style="background-image: url('{{ profilo.image }}')"
    ></div>
    <div class="flex-grow d-flex rounded-pill border ps-4">
      <form
        class="flex-grow no-wrap d-flex"
        [formGroup]="form"
        (ngSubmit)="addComment()"
      >
        <input
          class="comment-input flex-grow"
          type="text"
          formControlName="comment"
        />
        <button class="comment-button rounded-circle">
          <i class="bi bi-send-plus"></i>
        </button>
      </form>

      <button class="comment-button rounded-circle">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-supported-dps="24x24"
          fill="currentColor"
          class="mercado-match"
          width="24"
          height="24"
          focusable="false"
        >
          <path
            d="M8 10.5A1.5 1.5 0 119.5 12 1.5 1.5 0 018 10.5zm6.5 1.5a1.5 1.5 0 10-1.5-1.5 1.5 1.5 0 001.5 1.5zm7.5 0A10 10 0 1112 2a10 10 0 0110 10zm-2 0a8 8 0 10-8 8 8 8 0 008-8zm-8 4a6 6 0 01-4.24-1.76l-.71.76a7 7 0 009.89 0l-.71-.71A6 6 0 0112 16z"
          ></path>
        </svg>
      </button>
      <button class="comment-button rounded-circle">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-supported-dps="24x24"
          fill="currentColor"
          class="mercado-match"
          width="24"
          height="24"
          focusable="false"
        >
          <path
            d="M19 4H5a3 3 0 00-3 3v10a3 3 0 003 3h14a3 3 0 003-3V7a3 3 0 00-3-3zm1 13a1 1 0 01-.29.71L16 14l-2 2-6-6-4 4V7a1 1 0 011-1h14a1 1 0 011 1zm-2-7a2 2 0 11-2-2 2 2 0 012 2z"
          ></path>
        </svg>
      </button>
    </div>
  </div>

  <div *ngIf="isComment === true">
    <p style="color: rgba(0, 0, 0, 0.6)">commenti</p>
    <app-comment
      *ngFor="let comment of comments"
      [comment]="comment"
      [post]="post"
    ></app-comment>
  </div>
</div>
